(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const h of s.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function a(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=a(r);fetch(r.href,s)}})();console.log("Strride E-Commerce Loaded");const L=document.querySelector(".menu-toggle"),f=document.querySelector(".nav-links"),q=document.querySelector(".menu-overlay"),B=document.querySelectorAll(".nav-links a");function y(){const t=f.classList.contains("active"),e=t?"remove":"add";L.classList[e]("active"),f.classList[e]("active"),q.classList[e]("active"),document.body.style.overflow=t?"":"hidden"}L&&f&&(L.addEventListener("click",y),q&&q.addEventListener("click",y),B.forEach(t=>{t.addEventListener("click",()=>{f.classList.contains("active")&&y()})}));let c=[];const C=localStorage.getItem("strride_products");if(C)try{c=JSON.parse(C);let t=!1;c=c.map(e=>e.category?e:(t=!0,e.id===1?{...e,category:"Men"}:e.id===2?{...e,category:"Accessories"}:e.id===3?{...e,category:"Accessories"}:e.id===4?{...e,category:"Women"}:{...e,category:"Uncategorized"})),t&&localStorage.setItem("strride_products",JSON.stringify(c))}catch(t){console.error("Error parsing stored products",t),c=[]}function v(){c=[{id:1,name:"Essential White Tee",price:"$25",category:"Men",image:"https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?auto=format&fit=crop&q=80&w=800"},{id:2,name:"Classic Denim Jacket",price:"$85",category:"Men",image:"https://images.unsplash.com/photo-1576995853123-5a10305d93c0?auto=format&fit=crop&q=80&w=800"},{id:3,name:"Urban Hoodie",price:"$55",category:"Men",image:"https://images.unsplash.com/photo-1556821840-3a63f95609a7?auto=format&fit=crop&q=80&w=800"},{id:4,name:"Oxford Button-Down",price:"$45",category:"Men",image:"https://images.unsplash.com/photo-1596755094514-f87e34085b2c?auto=format&fit=crop&q=80&w=800"},{id:5,name:"Slim Fit Chinos",price:"$60",category:"Men",image:"https://images.unsplash.com/photo-1473966968600-fa801b869a1a?auto=format&fit=crop&q=80&w=800"},{id:6,name:"Summer Floral Dress",price:"$75",category:"Women",image:"https://images.unsplash.com/photo-1572804013309-59a88b7e92f1?auto=format&fit=crop&q=80&w=800"},{id:7,name:"Elegant Blouse",price:"$50",category:"Women",image:"https://images.unsplash.com/photo-1564257631407-4deb1f99d992?auto=format&fit=crop&q=80&w=800"},{id:8,name:"High-Waist Jeans",price:"$65",category:"Women",image:"https://images.unsplash.com/photo-1541099649105-f69ad21f3246?auto=format&fit=crop&q=80&w=800"},{id:9,name:"Cozy Knit Sweater",price:"$70",category:"Women",image:"https://images.unsplash.com/photo-1576566588028-4147f3842f27?auto=format&fit=crop&q=80&w=800"},{id:10,name:"Pleated Midi Skirt",price:"$55",category:"Women",image:"https://images.unsplash.com/photo-1583496661160-fb5886a0aaaa?auto=format&fit=crop&q=80&w=800"},{id:11,name:"Minimalist Leather Watch",price:"$120",category:"Accessories",image:"https://images.unsplash.com/photo-1524805444758-089113d48a6d?auto=format&fit=crop&q=80&w=800"},{id:12,name:"Canvas Backpack",price:"$65",category:"Accessories",image:"https://images.unsplash.com/photo-1553062407-98eeb64c6a62?auto=format&fit=crop&q=80&w=800"},{id:13,name:"Classic Sunglasses",price:"$40",category:"Accessories",image:"https://images.unsplash.com/photo-1572635196237-14b3f281503f?auto=format&fit=crop&q=80&w=800"},{id:14,name:"Checkered Midi Skirt",price:"$45",category:"Women",image:"https://images.unsplash.com/photo-1552874869-5c3980695940?auto=format&fit=crop&q=80&w=800"},{id:15,name:"Wool Beanie",price:"$25",category:"Accessories",image:"https://images.unsplash.com/photo-1576871337632-b9aef4c17ab9?auto=format&fit=crop&q=80&w=800"}],localStorage.setItem("strride_products",JSON.stringify(c)),console.log("Data seeded/reset with 15 CURATED products (Version 4).")}c.length===0?v():localStorage.getItem("strride_seeded_curated_v4")?c.some(e=>!e.category)&&(console.log("Found stale data (missing categories). Resetting..."),v(),localStorage.setItem("strride_seeded_curated_v4","true")):(console.log("Upgrading to Curated V4 dataset..."),v(),localStorage.setItem("strride_seeded_curated_v4","true"));const S=document.querySelector(".search-btn"),w=document.getElementById("search-overlay"),k=document.querySelector(".close-search-btn"),g=document.getElementById("search-input"),u=document.getElementById("search-results"),l=document.querySelectorAll(".filter-pill"),n=document.getElementById("product-grid");S&&w&&S.addEventListener("click",()=>{w.classList.add("active"),setTimeout(()=>g.focus(),100)});k&&k.addEventListener("click",()=>{w.classList.remove("active"),g.value="",u.innerHTML=""});g&&g.addEventListener("input",t=>{const e=t.target.value.toLowerCase();if(u.innerHTML="",e.length<2)return;const a=c.filter(o=>o.name.toLowerCase().includes(e)||o.category&&o.category.toLowerCase().includes(e));a.forEach(o=>{const r=document.createElement("div");r.className="search-result-item",r.innerHTML=`
        <img src="${o.image}" alt="${o.name}">
        <div>
          <h4>${o.name}</h4>
          <p>${o.price}</p>
        </div>
      `,r.onclick=()=>{window.location.href=`shop.html?highlight=${o.id}`},u.appendChild(r)}),a.length===0&&(u.innerHTML='<p style="margin-top: 1rem; color: #666;">No products found.</p>')});l.length>0?(console.log("Filter pills found:",l.length),l.forEach(t=>{t.addEventListener("click",()=>{console.log("Filter pill clicked:",t.dataset.category),l.forEach(o=>o.classList.remove("active")),t.classList.add("active");const e=t.dataset.category,a=e==="all"?c:c.filter(o=>o.category===e);console.log("Filtered Results:",a.length),T(a)})})):console.log("No filter pills found on this page.");function T(t){if(!n)return;n.innerHTML="";const e=document.createDocumentFragment();t.forEach(a=>{const o=document.createElement("article");o.className="product-card",o.innerHTML=`
      <div class="product-image-container">
        <img src="${a.image}" alt="${a.name}" class="product-image" loading="lazy">
        <button class="add-to-cart-btn" data-id="${a.id}" aria-label="Add to Cart">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 5V19"></path>
            <path d="M5 12H19"></path>
          </svg>
        </button>
      </div>
      <div class="product-info">
        <div style="display: flex; justify-content: space-between; align-items: start;">
          <h3 class="product-name">${a.name}</h3>
          <span class="product-price">${a.price}</span>
        </div>
        <span style="font-size: 0.8rem; color: #888;">${a.category||"Essential"}</span>
      </div>
    `,e.appendChild(o)}),n.appendChild(e)}if(n){const t=parseInt(n.dataset.limit),e=t?c.slice(0,t):c;T(e)}let i=[];const A=document.getElementById("cart-drawer"),E=document.getElementById("cart-overlay"),M=document.querySelector(".close-cart-btn"),b=document.getElementById("cart-items"),I=document.getElementById("cart-subtotal");document.querySelectorAll(".cart-icon, .cart-btn");function p(t){const e=t?"add":"remove";A.classList[e]("active"),E.classList[e]("active"),document.body.style.overflow=t?"hidden":""}function $(){if(b.innerHTML="",i.length===0){b.innerHTML='<p class="empty-cart-message">Your cart is empty.</p>',I.textContent="$0.00";return}let t=0;i.forEach(o=>{const r=parseFloat(o.price.replace("$",""));t+=r*o.qty;const s=document.createElement("div");s.classList.add("cart-item"),s.innerHTML=`
      <img src="${o.image}" alt="${o.name}" class="cart-item-image">
      <div class="cart-item-details">
        <div>
          <h4 class="cart-item-name">${o.name}</h4>
          <div class="cart-item-price">${o.price}</div>
        </div>
        <div class="cart-item-controls">
          <div class="qty-controls">
            <button class="qty-btn" onclick="changeQty(${o.id}, -1)">-</button>
            <span class="qty-value">${o.qty}</span>
            <button class="qty-btn" onclick="changeQty(${o.id}, 1)">+</button>
          </div>
          <button class="remove-btn" onclick="removeFromCart(${o.id})">Remove</button>
        </div>
      </div>
    `,b.appendChild(s)}),I.textContent=`$${t.toFixed(2)}`;const e=i.reduce((o,r)=>o+r.qty,0),a=document.querySelector(".cart-count");a&&(a.textContent=e,e>0?(a.classList.add("active"),a.style.transform="scale(1.2)",setTimeout(()=>a.style.transform="scale(1)",200)):a.classList.remove("active"))}function F(t){const e=c.find(o=>o.id===parseInt(t)),a=i.find(o=>o.id===parseInt(t));a?a.qty++:i.push({...e,qty:1}),$(),p(!0)}window.changeQty=(t,e)=>{const a=i.find(o=>o.id===t);a&&(a.qty+=e,a.qty<=0&&(i=i.filter(o=>o.id!==t)),$())};window.removeFromCart=t=>{i=i.filter(e=>e.id!==t),$()};M&&M.addEventListener("click",()=>p(!1));E&&E.addEventListener("click",()=>p(!1));document.querySelectorAll(".cart-icon").forEach(t=>{t.addEventListener("click",e=>{e.preventDefault(),p(!0)})});n&&n.addEventListener("click",t=>{const e=t.target.closest(".add-to-cart-btn");e&&(t.stopPropagation(),F(e.dataset.id),e.style.transform="scale(0.9)",setTimeout(()=>e.style.transform="",150))});const d=document.querySelector(".newsletter-form");d&&d.addEventListener("submit",t=>{t.preventDefault();const e=d.querySelector("input");if(e.value){const o=d.querySelector("button"),r=o.innerHTML;o.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M20 6L9 17l-5-5"/></svg>',e.value="Thanks for subscribing!",e.disabled=!0,setTimeout(()=>{e.value="",e.disabled=!1,o.innerHTML=r},3e3)}});const m=document.querySelector(".contact-form");m&&m.addEventListener("submit",t=>{t.preventDefault();const e=m.querySelector('button[type="submit"]'),a=e.textContent;e.textContent="Message Sent!",e.style.backgroundColor="#4CAF50",e.disabled=!0,setTimeout(()=>{e.textContent=a,e.style.backgroundColor="",e.disabled=!1,m.reset()},3e3)});
